---
title: "License Network Plots"
author: "cslovas"
format: 
  html:
    toc: true
    self-contained: true
editor: visual
---

Please review to the [License Networks](https://carlylovas.github.io/mesg-permits/R/license_networks.html) to understand which license code corresponds with which license type

```{r}
#| label:   load libraries & data 
#| echo:    false
#| message: false
#| warning: false

library(tidyverse)
library(tidygraph)
library(ggraph)
library(igraph)
library(here)
library(gmRi)
library(grid)

annual_graphs <- read_rds(here("Data", "network_graphs.rds"))

```

## Annual network plots

Each network features only the licenses available in that given year.

```{r}
#| label: annual graphs
#| echo: false
#| message: false
#| warning: false
#| column:  page
#| fig-width:  6
#| fig-height: 6
#| fig-align: center


gridExtra::marrangeGrob(annual_graphs$ggraph_circular, layout_matrix = matrix(1:1, ncol = 1, nrow = 1, byrow= TRUE), top = NULL)

```

## Edge density

Below is the time series of network edge density. The density of a graph is the ratio of the actual number of edges and the largest possible number of edges in the graph, assuming that no multi-edges are present. A network with higher density suggests more connections within the network. In the case of these license networks, a more dense network would suggest less access to alternate fisheries and a less dense network would have more accessibility across fisheries, therefore improving the adaptive capacity of harvesters.

> High modularity and low density have different subgroups of the target species that alternate over the time period, while high density implies species are being caught simultaneously (Nomura et. al, 2021)

```{r}
#| label: edge density
#| echo: false
#| message: false
#| warning: false
#| column:  page
#| fig-width:  9
#| fig-height: 7
#| fig-align: center

annual_graphs %>%
  select(license_year, density) %>% 
  mutate(density = as.numeric(density)) %>%
  ggplot() +
  geom_line(aes(x = license_year, y = density)) +
  ggtitle("Edge density") +
  theme_gmri(plot.title = element_text(size = 10),
             axis.text  = element_text(size = 8),
             axis.title = element_blank())
              
```
